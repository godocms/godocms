# BASS低代码平台

## 总后台管理

### 需求

#### 管理员

##### &check; 登录验证 2021/11/12

- &check; jwt校验
- &check; 只允许一个帐号在一个端下登录
- &check; 登录后规定时间保活

##### 角色管理  2021/11/14

- &check; 允许多角色管理，角色取交集
- &check; 角色可继承权限，每个角色应该有独立的权限职责划分

##### 菜单管理 2021/11/13

- &check; 分前端模版和后端路由，权限由后端路由控制，增删改，图标可自定义

##### 管理员管理 2021/11/15

- &check; 可添加/删除/搜索/编辑管理员，管理员和菜单权限挂钩

#### 系统日志 2021/11/15

- &check; 记录每个人的操作记录  2021/11/15
- &cross; &rArr; 定期清理，清理前做物理归档
- &check; 记录每个人的查看记录，并记录离开时间  2021/11/14

#### 系统配置

- &check; 可自定义配置，支持字段配置，自定义表单定义配置信息
- &cross; &rArr; 可自动分表，规划分表规则
- &cross; &rArr; 数据库自动定时备份，和计划任务一起做，配置和计划任务分开
- &cross; &rArr; 配置写库，写到config

#### 系统功能

- &check; 支持csrf，可控制开关  2021/11/14
- &check; 支持apidoc生成开发文档  2021/11/14
- &check; 支持ratelimit实现访问速率限制，保护程序免受暴力攻击，可控制开关以及速度  2021/11/14
- &check; 支持helmet，避免XSS跨站脚本攻击，可控制开关  2021/11/14

#### 表单生成器

- &check; 支持组件拖拽，支持表单回写 2021/11/15
- &check; 支持生成html以及代码预览 2021/11/16
- &check; 支持数据来源，支持自定义接收参数和发送附加参数 2021/11/16

#### 数据库设计器

- &check; 支持数据备份还原，查看数据表实时状态 2021/11/17
- &check; 支持自动生成数据库设计文档，md格式以及实时预览，下载成pdf文件 2021/11/18
- &check; 支持数据表名/注释/autoid的更改，支持优化表/修复表/删除表/清空表 2021/11/19
- &check; 可查看/编辑/新增/复制任意表数据  2021/11/20
- &check; 新增系统表数据保护  2021/11/20
- &check; 可更改字段名/注释/默认值/排序，可删除字段 2021/11/20
- &check; 新增连接/管理外部数据库 2021/11/25
- &check; 新增数据库表保护 2021/11/25

#### 模块管理

- &cross; &rArr; 负责模块初始化，以及用到哪些表
- &cross; &rArr; 可导入导出json

#### 列表设计器

- &cross; &rArr; 依托接口管理

#### 表单设计器

- &cross; &rArr; 依托接口管理

#### 接口设计器

- &cross; &rArr; 依托模块管理
- &cross; &rArr; 权限管理
- &cross; &rArr; 可调用模型设计器
- &cross; &rArr; 管理输入和输出，方法，参数
- &cross; &rArr; 初始参数管理
- &cross; &rArr; 过程参数管理
- &cross; &rArr; 逻辑管理
- &cross; &rArr; 可自动生成文档（第二阶段）
- &cross; &rArr; 可生成测试用例（第二阶段）

#### 模型设计器

- &cross; &rArr; 管理数据库操作，依托模块管理，负责接口调用

#### 服务设计器

- &cross; &rArr; 管理外部接口，负责接口调用

#### 插件管理

- &cross; &rArr; 可作为独立的npm插件包使用
- &cross; &rArr; 检索目录，检测配置，拷贝文件

##### 地区管理

- &cross; &rArr; 支持无限分类，做为数据分权的依据

##### 岗位管理

- &cross; &rArr; 部门/集团/公司/门店/仓库都可以设立岗位，岗位具有职责性

##### 部门管理

- &cross; &rArr; 部门可归属总后台/集团/公司/仓库/门店，也可设置分部门

##### 集团管理

- &cross; &rArr; 集团是全系统的总线，每个集团可拥有整个系统的功能，除集团管理外

##### 公司管理

- &cross; &rArr; 公司隶属于集团，可设置分公司

##### 门店管理

- &cross; &rArr; 门店隶属于公司或集团，可管理仓库

##### 仓库管理

- &cross; &rArr; 仓库隶属于门店/公司/集团，管理商品存贮

#### 计划任务

- &cross; &rArr; 前期由总管理员管理，后期可下放到集团管理员

### 表设计

- 参考[表设计](sql.md)

### 程序设计

## 项目管理

### 需求

- 项目管理
- 可维护项目
- 可共享
- 可出售
- 可归档
- 可导入导出
- 可本地化部署

### 表结构设计

#### rt_projects(主表)

#### rt_projects_sales(销售表)

## 思维导图

### 需求

- 可管理数据库
- 可设置接口
- 可管理页面

## 用户后台管理

### 需求

## 数据库管理

### 需求

- 可连接外部数据库
- 可数据字段管理
- 可新建表和库
- 可视化

## 接口管理

### 需求

- 可快速创建接口
- 可根据程序创建接口
- 可post/get测试
- 可根据数据库创建接口
- 微信
- 钉钉

## 页面管理

### 需求

- 大屏页面管理
- h5页面管理
- web页面管理
- 后台页面管理
- 可表单自定义
- 数据表可自定义
- 微信钉钉接口

## 程序管理

### 需求

- 可视化程序编程
- 可进行类和函数的拖拽
- 可拖拽函数模块
- 可根据目录接口创建代码
- 支持代码模版

## 设计原则

### 开发原则

- 易上手，易维护，容易改
- 模块化，可独立使用，可做插件使用，每个模块都有自己独立的生命
- 功能唯一性，所有功能尽量唯一
- 入口唯一性，所有的入口要做到唯一，就是只能一个地方进来，避免业务逻辑的维护

### 请求方法规则

- 所有的数据增/删/改都用post
- 所有的查询都用get

### 小部件固化

### 功能分离

### 松耦合
